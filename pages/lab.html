<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¯è§†åŒ–å®éªŒå®¤ - å¾®ç§¯åˆ†å¹³å°</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- MathJax - ä¿®å¤ï¼šå…ˆé…ç½®ååŠ è½½ -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']]
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /* åŠ è½½åŠ¨ç”» */
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gray-50">
  
  <!-- å¯¼èˆªæ  -->
  <nav class="bg-white shadow-lg sticky top-0 z-50">
    <div class="container mx-auto px-6 py-3">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-blue-600">å¾®ç§¯åˆ†æ¢ç´¢</h1>
        <div class="space-x-4">
          <a href="../index.html" class="hover:text-blue-600 transition">é¦–é¡µ</a>
          <a href="history.html" class="hover:text-blue-600 transition">å‘å±•å²</a>
          <a href="lab.html" class="text-blue-600 font-semibold">å®éªŒå®¤</a>
          <a href="formula-list.html" class="hover:text-blue-600 transition">å…¬å¼æ‰‹å†Œ</a>
          <a href="quiz.html" class="hover:text-blue-600 transition">æµ‹éªŒæŒ‘æˆ˜</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="container mx-auto px-6 py-8">
    <h2 class="text-4xl font-bold text-center mb-8">åŠ¨æ€å¯è§†åŒ–å®éªŒå®¤</h2>
    
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
      <!-- å·¦ä¾§ï¼šæ§åˆ¶é¢æ¿ -->
      <div class="bg-white p-6 rounded-lg shadow">
        <h3 class="text-xl font-bold mb-4">é€‰æ‹©å®éªŒ</h3>
        <select id="experiment-selector" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
          <option value="">-- è¯·é€‰æ‹© --</option>
          <option value="derivative">å¯¼æ•°å®šä¹‰åŠ¨ç”»</option>
          <option value="integral">å®šç§¯åˆ†æ¼”ç¤º</option>
          <option value="taylor">æ³°å‹’çº§æ•°</option>
        </select>
        
        <div class="mt-6 p-4 bg-blue-50 rounded-lg">
          <p class="text-sm text-gray-700">
            ğŸ’¡ <strong>æç¤ºï¼š</strong> é€‰æ‹©å®éªŒåï¼Œå³ä¾§ä¼šåŠ è½½äº¤äº’å¼å›¾å½¢ã€‚
          </p>
        </div>

        <!-- å¿«é€Ÿé“¾æ¥ -->
        <div class="mt-6">
          <h4 class="font-semibold mb-2">å¿«é€Ÿæ¼”ç¤º</h4>
          <button onclick="loadDirectEmbed()" 
                  class="w-full bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
            åŠ è½½ä½ çš„ GeoGebra
          </button>
        </div>
      </div>
      
      <!-- å³ä¾§ï¼šGeoGebra å®¹å™¨ -->
      <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow">
        <div id="applet-container" class="text-center">
          <p class="text-gray-500 py-12">è¯·é€‰æ‹©å·¦ä¾§å®éªŒå¼€å§‹</p>
        </div>
      </div>
    </div>

    <!-- å•ç‹¬æµ‹è¯•åŒºåŸŸï¼ˆç›´æ¥ç²˜è´´ä½ çš„ iframeï¼‰ -->
    <div class="mt-12 bg-white p-6 rounded-lg shadow">
      <h3 class="text-2xl font-semibold text-center mb-4">ç›´æ¥åµŒå…¥æµ‹è¯•</h3>
      <div class="flex justify-center">
        <iframe src="https://www.geogebra.org/classic/eara9vcc?embed" 
                width="800" 
                height="600" 
                allowfullscreen 
                style="border: 1px solid #e4e4e4;border-radius: 4px;" 
                frameborder="0">
        </iframe>
      </div>
      <p class="text-center text-sm text-gray-600 mt-2">
        è¿™æ˜¯ä½ æä¾›çš„ GeoGebra å›¾å½¢
      </p>
    </div>
  </main>

  <!-- JavaScript -->
  <script>
    // å®éªŒé…ç½®ï¼ˆä½¿ç”¨ Material IDï¼‰
    const experiments = {
      derivative: {
        name: "å¯¼æ•°å®šä¹‰",
        materialId: "eara9vcc",
        width: 800,
        height: 600
      },
      integral: {
        name: "å®šç§¯åˆ†",
        materialId: "dtm5p9uz",
        width: 800,
        height: 500
      },
      taylor: {
        name: "æ³°å‹’çº§æ•°",
        materialId: "v3yzd5v9",
        width: 800,
        height: 600
      }
    };

    // åŠ¨æ€åŠ è½½å‡½æ•°ï¼ˆæ¨èï¼‰
    function embedGeoGebra(containerId, materialId, width, height) {
      const container = document.getElementById(containerId);
      if (!container) return;

      // æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
      container.innerHTML = `
        <div class="flex items-center justify-center py-12">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
          <span class="ml-3 text-gray-600">æ­£åœ¨åŠ è½½ GeoGebra...</span>
        </div>
      `;

      // ä½¿ç”¨å®˜æ–¹ iframe åµŒå…¥
      setTimeout(() => {
        container.innerHTML = `
          <div>
            <h3 class="text-lg font-semibold mb-4">${experiments[materialId]?.name || 'GeoGebra æ¼”ç¤º'}</h3>
            <iframe src="https://www.geogebra.org/material/iframe/id/${materialId}/width/${width}/height/${height}" 
                    width="${width}" 
                    height="${height}" 
                    style="border: 1px solid #e4e4e4; border-radius: 8px;" 
                    frameborder="0" allowfullscreen>
            </iframe>
            <p class="text-sm text-gray-500 mt-2">
              ğŸ’¡ æ‹–åŠ¨æ»‘å—è¿›è¡Œäº¤äº’
            </p>
          </div>
        `;
      }, 500);
    }

    // åŠ è½½ä½ çš„ç›´æ¥åµŒå…¥
    function loadDirectEmbed() {
      const container = document.getElementById('applet-container');
      container.innerHTML = `
        <div>
          <h3 class="text-lg font-semibold mb-4">ä½ çš„ GeoGebra å›¾å½¢</h3>
          <iframe src="https://www.geogebra.org/classic/eara9vcc?embed" 
                  width="800" 
                  height="600" 
                  allowfullscreen 
                  style="border: 1px solid #e4e4e4;border-radius: 4px;" 
                  frameborder="0">
          </iframe>
        </div>
      `;
    }

    // ä¿®å¤ï¼šDOMåŠ è½½å®Œæˆåç»‘å®šäº‹ä»¶
    document.addEventListener('DOMContentLoaded', () => {
      const selector = document.getElementById('experiment-selector');
      if (selector) {
        selector.addEventListener('change', (e) => {
          const key = e.target.value;
          if (key && experiments[key]) {
            const exp = experiments[key];
            embedGeoGebra('applet-container', exp.materialId, exp.width, exp.height);
          } else if (!key) {
            // æ¸…ç©ºå®¹å™¨
            document.getElementById('applet-container').innerHTML = 
              '<p class="text-gray-500 py-12">è¯·é€‰æ‹©å·¦ä¾§å®éªŒå¼€å§‹</p>';
          }
        });
      }
    });
  </script>

</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹éªŒæŒ‘æˆ˜ - å¾®ç§¯åˆ†å¹³å°</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- âš ï¸ åˆ é™¤ MathJaxï¼Œä¸å†éœ€è¦ -->
</head>
<body class="bg-gray-50">
  
  <!-- å¯¼èˆªæ  -->
  <nav class="bg-white shadow-lg sticky top-0 z-50">
    <div class="container mx-auto px-6 py-3">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-blue-600">å¾®ç§¯åˆ†æ¢ç´¢</h1>
        <div class="space-x-4">
          <!-- âœ… ä¿®å¤ï¼šæ‰€æœ‰é“¾æ¥ä½¿ç”¨æ­£ç¡®ç›¸å¯¹è·¯å¾„ï¼Œå½“å‰é¡µé¢é«˜äº® -->
          <a href="../index.html" class="hover:text-blue-600 transition">é¦–é¡µ</a>
          <a href="history.html" class="hover:text-blue-600 transition">å‘å±•å²</a>
          <a href="lab.html" class="hover:text-blue-600 transition">å®éªŒå®¤</a>
          <a href="formula-list.html" class="hover:text-blue-600 transition">å…¬å¼æ‰‹å†Œ</a>
          <a href="quiz.html" class="text-blue-600 font-semibold">æµ‹éªŒæŒ‘æˆ˜</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="container mx-auto px-6 py-8 max-w-4xl">
    <h2 class="text-4xl font-bold text-center mb-8">ğŸ® å¾®ç§¯åˆ†æµ‹éªŒæŒ‘æˆ˜</h2>
    
    <!-- è¿›åº¦æ¡ -->
    <div class="w-full bg-gray-200 rounded-full h-2.5 mb-8">
      <div class="bg-gradient-to-r from-blue-500 to-purple-500 h-2.5 rounded-full transition-all duration-500" 
           style="width: 0%" id="progressBar"></div>
    </div>

    <!-- é¢˜ç›®å¡ç‰‡ -->
    <div class="bg-white p-8 rounded-lg shadow-lg" id="questionCard">
      <div class="mb-4 flex justify-between items-center">
        <span class="text-sm text-gray-500">é¢˜ç›® <span id="qNum">1</span> / 5</span>
        <span class="text-sm text-green-600 font-semibold">å¾—åˆ†: <span id="currentScore">0</span></span>
      </div>
      
      <h3 class="text-2xl font-semibold mb-6" id="questionTitle">æ±‚å¯¼æ•°ï¼š</h3>
      
      <!-- å…¬å¼å›¾ç‰‡ï¼ˆCodeCogsç”Ÿæˆï¼‰ -->
      <div class="bg-blue-50 p-4 rounded mb-6 flex justify-center" id="formulaContainer">
        <img src="https://latex.codecogs.com/svg.latex?f(x)=3x^2+2x-5" 
             alt="å…¬å¼" style="height: 50px;">
      </div>

      <!-- é€‰é¡¹åŒºåŸŸï¼ˆä¹Ÿç”¨å›¾ç‰‡ï¼‰ -->
      <div class="space-y-3" id="options">
        <label class="flex items-center p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition">
          <input type="radio" name="answer" value="0" class="mr-3">
          <img src="https://latex.codecogs.com/svg.latex?6x+2" alt="é€‰é¡¹1" style="height: 30px;">
        </label>
        <label class="flex items-center p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition">
          <input type="radio" name="answer" value="1" class="mr-3">
          <img src="https://latex.codecogs.com/svg.latex?3x+2" alt="é€‰é¡¹2" style="height: 30px;">
        </label>
        <label class="flex items-center p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition">
          <input type="radio" name="answer" value="2" class="mr-3">
          <img src="https://latex.codecogs.com/svg.latex?6x" alt="é€‰é¡¹3" style="height: 30px;">
        </label>
      </div>

      <button onclick="checkAnswer()" id="submitBtn"
              class="mt-6 w-full bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition disabled:opacity-50">
        æäº¤ç­”æ¡ˆ
      </button>
    </div>

    <!-- ç»“æœåé¦ˆ -->
    <div id="feedback" class="hidden mt-6 p-4 rounded-lg"></div>

    <!-- ä¸‹ä¸€é¢˜æŒ‰é’® -->
    <div class="text-center mt-6">
      <button onclick="nextQuestion()" id="nextBtn" 
              class="hidden bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition">
        ä¸‹ä¸€é¢˜ â†’
      </button>
    </div>

    <!-- æœ€ç»ˆå¾—åˆ† -->
    <div id="scoreCard" class="hidden text-center mt-8 bg-white p-8 rounded-lg shadow-lg">
      <h3 class="text-3xl font-bold mb-4">ğŸ‰ æµ‹éªŒå®Œæˆï¼</h3>
      <div class="mb-6">
        <p class="text-5xl font-bold mb-2">
          <span id="finalScore" class="bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">0</span>
        </p>
        <p class="text-gray-600">/ 100 åˆ†</p>
      </div>
      <div id="scoreComment" class="mb-6 text-lg"></div>
      <button onclick="restartQuiz()" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition">
        é‡æ–°æµ‹éªŒ
      </button>
    </div>
  </main>

  <script>
    // é¢˜ç›®æ•°æ®åº“ - ä½¿ç”¨ CodeCogs å›¾ç‰‡ URL
    const questions = [
      {
        title: "æ±‚å¯¼æ•°ï¼š",
        formulaUrl: "https://latex.codecogs.com/svg.latex?f(x)=3x^2+2x-5",
        optionUrls: [
          "https://latex.codecogs.com/svg.latex?6x+2",
          "https://latex.codecogs.com/svg.latex?3x+2",
          "https://latex.codecogs.com/svg.latex?6x"
        ],
        correct: 0,
        explanation: "ä½¿ç”¨å¹‚å‡½æ•°æ±‚å¯¼æ³•åˆ™ï¼šf'(x) = 6x + 2"
      },
      {
        title: "è®¡ç®—ä¸å®šç§¯åˆ†ï¼š",
        formulaUrl: "https://latex.codecogs.com/svg.latex?\\int 2x \\, dx",
        optionUrls: [
          "https://latex.codecogs.com/svg.latex?x^2+C",
          "https://latex.codecogs.com/svg.latex?x^2",
          "https://latex.codecogs.com/svg.latex?2+C"
        ],
        correct: 0,
        explanation: "ç§¯åˆ†å¹‚æ³•åˆ™ï¼šâˆ«2x dx = xÂ² + C"
      },
      {
        title: "æ±‚æé™ï¼š",
        formulaUrl: "https://latex.codecogs.com/svg.latex?\\lim_{x \\to 0} \\frac{\\sin x}{x}",
        optionUrls: [
          "https://latex.codecogs.com/svg.latex?0",
          "https://latex.codecogs.com/svg.latex?1",
          "https://latex.codecogs.com/svg.latex?\\infty"
        ],
        correct: 1,
        explanation: "é‡è¦æé™ï¼šlim(xâ†’0) sin(x)/x = 1"
      },
      {
        title: "è®¡ç®—å¯¼æ•°ï¼š",
        formulaUrl: "https://latex.codecogs.com/svg.latex?f(x)=e^{2x}",
        optionUrls: [
          "https://latex.codecogs.com/svg.latex?e^{2x}",
          "https://latex.codecogs.com/svg.latex?2e^{2x}",
          "https://latex.codecogs.com/svg.latex?2e^{x}"
        ],
        correct: 1,
        explanation: "é“¾å¼æ³•åˆ™ï¼šf'(x) = 2e^(2x)"
      },
      {
        title: "è®¡ç®—å®šç§¯åˆ†ï¼š",
        formulaUrl: "https://latex.codecogs.com/svg.latex?\\int_{0}^{1} x \\, dx",
        optionUrls: [
          "https://latex.codecogs.com/svg.latex?0",
          "https://latex.codecogs.com/svg.latex?0.5",
          "https://latex.codecogs.com/svg.latex?1"
        ],
        correct: 1,
        explanation: "å®šç§¯åˆ†ï¼šâˆ«â‚€Â¹ x dx = 0.5"
      }
    ];

    let currentQ = 0;
    let score = 0;

    // æ£€æŸ¥ç­”æ¡ˆ
    function checkAnswer() {
      const selected = document.querySelector('input[name="answer"]:checked');
      if (!selected) {
        alert('âš ï¸ è¯·å…ˆé€‰æ‹©ä¸€ä¸ªç­”æ¡ˆï¼');
        return;
      }

      const feedback = document.getElementById('feedback');
      const isCorrect = parseInt(selected.value) === questions[currentQ].correct;
      
      if (isCorrect) {
        score += 20;
        feedback.className = 'mt-6 p-4 bg-green-100 text-green-800 rounded-lg';
        feedback.innerHTML = `<strong>âœ… æ­£ç¡®ï¼</strong> ${questions[currentQ].explanation}`;
      } else {
        feedback.className = 'mt-6 p-4 bg-red-100 text-red-800 rounded-lg';
        feedback.innerHTML = `<strong>âŒ é”™è¯¯</strong> ${questions[currentQ].explanation}`;
      }

      feedback.classList.remove('hidden');
      document.getElementById('nextBtn').classList.remove('hidden');
      
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = true;
      submitBtn.classList.add('opacity-50');
      
      // æ›´æ–°å¾—åˆ†
      document.getElementById('currentScore').textContent = score;
    }

    // ä¸‹ä¸€é¢˜
    function nextQuestion() {
      currentQ++;
      
      if (currentQ >= questions.length) {
        showFinalScore();
        return;
      }

      // æ›´æ–°é¢˜ç›®
      const q = questions[currentQ];
      document.getElementById('qNum').textContent = currentQ + 1;
      document.getElementById('questionTitle').textContent = q.title;
      
      // æ›´æ–°å…¬å¼å›¾ç‰‡
      const formulaContainer = document.getElementById('formulaContainer');
      formulaContainer.innerHTML = `<img src="${q.formulaUrl}" alt="å…¬å¼" style="height: 50px;">`;
      
      // æ›´æ–°é€‰é¡¹å›¾ç‰‡
      const options = document.getElementById('options');
      options.innerHTML = q.optionUrls.map((url, i) => `
        <label class="flex items-center p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition">
          <input type="radio" name="answer" value="${i}" class="mr-3">
          <img src="${url}" alt="é€‰é¡¹${i+1}" style="height: 30px;">
        </label>
      `).join('');
      
      // éšè—åé¦ˆå’ŒæŒ‰é’®
      document.getElementById('feedback').classList.add('hidden');
      document.getElementById('nextBtn').classList.add('hidden');
      
      // é‡ç½®æäº¤æŒ‰é’®
      const submitBtn = document.getElementById('submitBtn');
      submitBtn.disabled = false;
      submitBtn.classList.remove('opacity-50');
      
      // æ›´æ–°è¿›åº¦æ¡
      document.getElementById('progressBar').style.width = `${((currentQ) / questions.length) * 100}%`;
    }

    // æ˜¾ç¤ºæœ€ç»ˆå¾—åˆ†
    function showFinalScore() {
      document.getElementById('questionCard').style.display = 'none';
      document.getElementById('scoreCard').classList.remove('hidden');
      document.getElementById('finalScore').textContent = score;
      document.getElementById('progressBar').style.width = '100%';
      
      // è¯„è¯­
      let comment = '';
      if (score >= 80) comment = 'ğŸ† ä¼˜ç§€ï¼ä½ æ˜¯å¾®ç§¯åˆ†å¤§å¸ˆï¼';
      else if (score >= 60) comment = 'ğŸ‘ è‰¯å¥½ï¼ç»§ç»­åŠªåŠ›ï¼';
      else if (score >= 40) comment = 'ğŸ“š åŠæ ¼ï¼Œå»ºè®®å¤ä¹ å…¬å¼';
      else comment = 'ğŸ’ª åŠ æ²¹ï¼å¤šç»ƒä¹ ä¼šæ›´å¥½ï¼';
      
      document.getElementById('scoreComment').textContent = comment;
    }

    // é‡æ–°å¼€å§‹
    function restartQuiz() {
      currentQ = 0;
      score = 0;
      document.getElementById('currentScore').textContent = '0';
      
      document.getElementById('questionCard').style.display = 'block';
      document.getElementById('scoreCard').classList.add('hidden');
      
      // é‡ç½®ä¸ºç¬¬ä¸€é¢˜
      document.getElementById('qNum').textContent = '1';
      document.getElementById('questionTitle').textContent = questions[0].title;
      
      const formulaContainer = document.getElementById('formulaContainer');
      formulaContainer.innerHTML = `<img src="${questions[0].formulaUrl}" alt="å…¬å¼" style="height: 50px;">`;
      
      const options = document.getElementById('options');
      options.innerHTML = questions[0].optionUrls.map((url, i) => `
        <label class="flex items-center p-3 border rounded-lg hover:bg-blue-50 cursor-pointer transition">
          <input type="radio" name="answer" value="${i}" class="mr-3">
          <img src="${url}" alt="é€‰é¡¹${i+1}" style="height: 30px;">
        </label>
      `).join('');
      
      document.getElementById('progressBar').style.width = '0%';
    }

    // é¡µé¢åŠ è½½åˆå§‹åŒ–
    window.addEventListener('DOMContentLoaded', () => {
      console.log('ğŸ“˜ æµ‹éªŒé¡µé¢åŠ è½½å®Œæˆï¼ˆå›¾ç‰‡æ¨¡å¼ï¼‰');
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>微积分学习平台</title>
  
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
  <!-- 核心修复：改为相对路径 -->
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="bg-gray-50">
  
  <!-- 加载状态指示器 -->
  <div id="mathjax-loading" class="fixed top-4 right-4 bg-yellow-400 text-yellow-900 px-3 py-2 rounded shadow-md text-sm z-50">
    <i class="fas fa-spinner fa-spin"></i> 正在加载公式...
  </div>

  <!-- 导航栏 -->
  <nav class="bg-white shadow-lg sticky top-0 z-40">
    <div class="container mx-auto px-6 py-3">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-blue-600">微积分探索</h1>
        <div class="space-x-4">
          <!-- 路径修复：首页链接改为相对路径 -->
          <a href="index.html" class="text-blue-600 font-semibold">首页</a>
          <a href="pages/history.html" class="hover:text-blue-600 transition">发展史</a>
          <a href="pages/lab.html" class="hover:text-blue-600 transition">实验室</a>
          <a href="pages/formula-list.html" class="hover:text-blue-600 transition">公式手册</a>
          <a href="pages/quiz.html" class="hover:text-blue-600 transition">测验挑战</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 主要内容 -->
  <main class="container mx-auto px-6 py-8">
    
    <!-- 每日挑战卡片 -->
    <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg shadow-lg p-6 text-white mb-12">
      <h3 class="text-2xl font-bold mb-2">🎯 今日挑战</h3>
      <p class="text-lg mb-4">计算极限：</p>
      <div class="bg-white bg-opacity-20 p-4 rounded mb-4">
        $$\lim_{x \to 0} \frac{\sin(3x)}{x}$$
      </div>
      <button onclick="revealAnswer()" 
              class="bg-white text-purple-600 px-4 py-2 rounded hover:bg-gray-100 transition font-semibold">
        查看答案
      </button>
      <div id="answer" class="hidden mt-4 p-4 bg-green-100 text-green-800 rounded">
        <strong>解答：</strong> 使用等价无穷小 \(\sin(3x) \sim 3x\)，原式 = 3
      </div>
    </div>

    <!-- 英雄区域 -->
    <div class="text-center py-12 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg mb-12">
      <h2 class="text-5xl font-bold text-blue-800 mb-4">
        <span class="typewriter">探索微积分的美丽</span>
      </h2>
      <p class="text-xl text-gray-600">从极限到无穷，从历史到应用</p>
    </div>

    <!-- 功能卡片 -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      <div class="bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1">
        <h3 class="text-2xl font-semibold mb-3 text-blue-600">📚 发展史</h3>
        <p class="text-gray-600 mb-4">了解从阿基米德到牛顿、莱布尼茨的完整故事</p>
        <a href="pages/history.html" class="text-blue-600 font-semibold hover:underline">
          开始学习 →
        </a>
      </div>
      
      <div class="bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1">
        <h3 class="text-2xl font-semibold mb-3 text-green-600">🔬 可视化实验室</h3>
        <p class="text-gray-600 mb-4">用 GeoGebra 动态观察导数、积分的几何意义</p>
        <a href="pages/lab.html" class="text-green-600 font-semibold hover:underline">
          进入实验室 →
        </a>
      </div>
      
      <div class="bg-white p-6 rounded-lg shadow hover:shadow-xl transition transform hover:-translate-y-1">
        <h3 class="text-2xl font-semibold mb-3 text-purple-600">🧮 公式手册</h3>
        <p class="text-gray-600 mb-4">常用导数、积分公式快速查询</p>
        <a href="pages/formula-list.html" class="text-purple-600 font-semibold hover:underline">
          查看公式 →
        </a>
      </div>
    </div>

    <!-- 今日公式 -->
    <div class="bg-white p-8 rounded-lg shadow max-w-2xl mx-auto">
      <h3 class="text-2xl font-semibold mb-4 text-center">今日微积分公式</h3>
      <div class="text-center">
        <p class="text-gray-700 mb-2">导数的极限定义：</p>
        <div class="my-4 p-4 bg-gray-50 rounded">
          $$f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}$$
        </div>
        <p class="text-sm text-gray-600">
          拖动下方的滑块观察割线如何逼近切线
        </p>
      </div>
    </div>
  </main>

  <script>
    // 查看答案函数
    function revealAnswer() {
      document.getElementById('answer').classList.toggle('hidden');
    }

    // 页面加载完成后的通用初始化
    document.addEventListener('DOMContentLoaded', function() {
      console.log('✅ 首页加载完成');
      // 3秒后隐藏加载提示
      setTimeout(() => {
        const loading = document.getElementById('mathjax-loading');
        if (loading) loading.style.display = 'none';
      }, 3000);
    });
  </script>

</body>
</html>
